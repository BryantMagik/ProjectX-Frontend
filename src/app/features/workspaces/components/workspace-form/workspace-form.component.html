<div class="workspace-form-container">
  <div class="form-header">
    <div class="header-content">
      <div class="header-title">
        <i class="pi pi-building"></i>
        <div>
          <h1 class="title">Create New Workspace</h1>
          <p class="subtitle">Set up a collaborative space for your team</p>
        </div>
      </div>
    </div>
  </div>

  <form (ngSubmit)="onSubmit()" [formGroup]="workspaceForm" class="form-content">
    <div class="form-group">
      <label for="name" class="form-label">
        <i class="pi pi-building mr-2"></i>
        Workspace Name
      </label>
      <input
        type="text"
        id="name"
        formControlName="name"
        placeholder="Enter workspace name"
        class="form-input"
        maxlength="30"
      />
      @if (workspaceForm.get('name')?.hasError('required') && workspaceForm.get('name')?.touched) {
        <span class="error-text">Workspace name is required</span>
      }
      @if (workspaceForm.get('name')?.hasError('maxlength')) {
        <span class="error-text">Maximum 30 characters allowed</span>
      }
    </div>

    <!-- Description -->
    <div class="form-group">
      <label for="description" class="form-label">
        <i class="pi pi-align-left mr-2"></i>
        Description (Optional)
      </label>
      <textarea
        id="description"
        formControlName="description"
        placeholder="Describe your workspace"
        class="form-textarea"
        rows="4"
      ></textarea>
    </div>

    <div class="form-group">
      <label class="form-label">
        <i class="pi pi-image mr-2"></i>
        Workspace Icon
      </label>
      <div class="image-upload-container">
        @if (workspaceForm.get('image')?.value) {
          <div class="image-preview">
            <img [src]="workspaceForm.get('image')?.value" alt="Workspace Icon" />
            <button
              type="button"
              (click)="removeImage()"
              class="remove-image-btn"
              title="Remove image"
            >
              <i class="pi pi-times"></i>
            </button>
          </div>
        } @else {
          <div class="image-placeholder">
            <i class="pi pi-image"></i>
          </div>
        }
        <div class="image-upload-info">
          <p class="image-upload-text">JPG, PNG, SVG or JPEG</p>
          <p class="image-upload-size">Maximum size: 1MB</p>
          <input
            #fileInput
            id="image"
            type="file"
            (change)="onFileSelected($event)"
            accept=".jpg, .jpeg, .png, .svg"
            style="display: none;"
          />
          <button
            type="button"
            (click)="fileInput.click()"
            [disabled]="isUploading"
            class="btn-upload"
          >
            @if (isUploading) {
              <i class="pi pi-spin pi-spinner mr-2"></i>
              Uploading...
            } @else {
              <i class="pi pi-cloud-upload mr-2"></i>
              Upload Image
            }
          </button>
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-cancel">
        <i class="pi pi-times mr-2"></i>
        Cancel
      </button>
      <button
        type="submit"
        class="btn-submit"
        [disabled]="workspaceForm.invalid || isUploading"
      >
        <i class="pi pi-check mr-2"></i>
        Create Workspace
      </button>
    </div>
  </form>
</div>

<div class="workspace-switcher">
  <button class="workspace-button"
    (click)="dropdownOpen = !dropdownOpen">
    @if (selectedWorkspace) {
      @if (selectedWorkspace.image) {
        <img [src]="selectedWorkspace.image" alt="Workspace Icon"
          class="workspace-avatar" />
      }
      @if (!selectedWorkspace.image) {
        <div class="workspace-avatar-placeholder">
          <span class="avatar-letter">{{ selectedWorkspace.name[0] }}</span>
        </div>
      }
      <span class="workspace-name">{{ selectedWorkspace.name }}</span>
      <i class="pi pi-chevron-down ml-auto text-slate-400"></i>
    } @else {
      <span class="workspace-empty">Select workspace</span>
    }
  </button>

  @if (dropdownOpen) {
    <div class="workspace-dropdown">
      @for (workspace of workspaces; track workspace) {
        <div (click)="selectWorkspace(workspace)"
          class="workspace-item">
          @if (workspace.image) {
            <img [src]="workspace.image" alt="Workspace Icon" class="workspace-item-avatar" />
          } @else {
            <div class="workspace-item-avatar-placeholder">
              <span class="item-avatar-letter">{{ workspace.name[0] }}</span>
            </div>
          }
          <span class="workspace-item-name">{{ workspace.name }}</span>
          @if (workspace === selectedWorkspace) {
            <i class="pi pi-check ml-auto text-blue-400"></i>
          }
        </div>
      }
    </div>
  }
</div>
